import{a as S}from"./react-0837b3d1.js";var ue=e=>e.type==="checkbox",Y=e=>e instanceof Date,R=e=>e==null;const Je=e=>typeof e=="object";var p=e=>!R(e)&&!Array.isArray(e)&&Je(e)&&!Y(e),Qe=e=>p(e)&&e.target?ue(e.target)?e.target.checked:e.target.value:e,bt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Xe=(e,i)=>e.has(bt(i)),ae=e=>Array.isArray(e)?e.filter(Boolean):[],C=e=>e===void 0,c=(e,i,r)=>{if(!i||!p(e))return r;const l=ae(i.split(/[,[\].]+?/)).reduce((s,a)=>R(s)?s:s[a],e);return C(l)||l===e?C(e[i])?r:e[i]:l};const fe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},I={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},K={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},At=S.createContext(null),Ee=()=>S.useContext(At);var Ye=(e,i,r,l=!0)=>{const s={defaultValues:i._defaultValues};for(const a in e)Object.defineProperty(s,a,{get:()=>{const d=a;return i._proxyFormState[d]!==I.all&&(i._proxyFormState[d]=!l||I.all),r&&(r[d]=!0),e[d]}});return s},P=e=>p(e)&&!Object.keys(e).length,Ze=(e,i,r,l)=>{r(e);const{name:s,...a}=e;return P(a)||Object.keys(a).length>=Object.keys(i).length||Object.keys(a).find(d=>i[d]===(!l||I.all))},oe=e=>Array.isArray(e)?e:[e],et=(e,i,r)=>r&&i?e===i:!e||!i||e===i||oe(e).some(l=>l&&(l.startsWith(i)||i.startsWith(l)));function Ce(e){const i=S.useRef(e);i.current=e,S.useEffect(()=>{const r=!e.disabled&&i.current.subject.subscribe({next:i.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}function Ft(e){const i=Ee(),{control:r=i.control,disabled:l,name:s,exact:a}=e||{},[d,g]=S.useState(r._formState),F=S.useRef(!0),v=S.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),w=S.useRef(s);return w.current=s,Ce({disabled:l,next:L=>F.current&&et(w.current,L.name,a)&&Ze(L,v.current,r._updateFormState)&&g({...r._formState,...L}),subject:r._subjects.state}),S.useEffect(()=>{F.current=!0;const L=r._proxyFormState.isDirty&&r._getDirty();return L!==r._formState.isDirty&&r._subjects.state.next({isDirty:L}),v.current.isValid&&r._updateValid(!0),()=>{F.current=!1}},[r]),Ye(d,r,v.current,!1)}var H=e=>typeof e=="string",tt=(e,i,r,l,s)=>H(e)?(l&&i.watch.add(e),c(r,e,s)):Array.isArray(e)?e.map(a=>(l&&i.watch.add(a),c(r,a))):(l&&(i.watchAll=!0),r),xt=e=>{const i=e.constructor&&e.constructor.prototype;return p(i)&&i.hasOwnProperty("isPrototypeOf")},pe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function G(e){let i;const r=Array.isArray(e);if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set(e);else if(!(pe&&(e instanceof Blob||e instanceof FileList))&&(r||p(e)))if(i=r?[]:{},!Array.isArray(e)&&!xt(e))i=e;else for(const l in e)i[l]=G(e[l]);else return e;return i}function wt(e){const i=Ee(),{control:r=i.control,name:l,defaultValue:s,disabled:a,exact:d}=e||{},g=S.useRef(l);g.current=l,Ce({disabled:a,subject:r._subjects.watch,next:w=>{et(g.current,w.name,d)&&v(G(tt(g.current,r._names,w.values||r._formValues,!1,s)))}});const[F,v]=S.useState(r._getWatch(l,s));return S.useEffect(()=>r._removeUnmounted()),F}function mt(e){const i=Ee(),{name:r,control:l=i.control,shouldUnregister:s}=e,a=Xe(l._names.array,r),d=wt({control:l,name:r,defaultValue:c(l._formValues,r,c(l._defaultValues,r,e.defaultValue)),exact:!0}),g=Ft({control:l,name:r}),F=S.useRef(l.register(r,{...e.rules,value:d}));return S.useEffect(()=>{const v=(w,L)=>{const m=c(l._fields,w);m&&(m._f.mount=L)};return v(r,!0),()=>{const w=l._options.shouldUnregister||s;(a?w&&!l._stateFlags.action:w)?l.unregister(r):v(r,!1)}},[r,l,a,s]),{field:{name:r,value:d,onChange:S.useCallback(v=>F.current.onChange({target:{value:Qe(v),name:r},type:fe.CHANGE}),[r]),onBlur:S.useCallback(()=>F.current.onBlur({target:{value:c(l._formValues,r),name:r},type:fe.BLUR}),[r,l]),ref:v=>{const w=c(l._fields,r);w&&v&&(w._f.ref={focus:()=>v.focus(),select:()=>v.select(),setCustomValidity:L=>v.setCustomValidity(L),reportValidity:()=>v.reportValidity()})}},formState:g,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!c(g.errors,r)},isDirty:{enumerable:!0,get:()=>!!c(g.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!c(g.touchedFields,r)},error:{enumerable:!0,get:()=>c(g.errors,r)}})}}const Bt=e=>e.render(mt(e));var Dt=(e,i,r,l,s)=>i?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[l]:s||!0}}:{},Oe=e=>/^\w*$/.test(e),rt=e=>ae(e.replace(/["|']|\]/g,"").split(/\.|\[/));function x(e,i,r){let l=-1;const s=Oe(i)?[i]:rt(i),a=s.length,d=a-1;for(;++l<a;){const g=s[l];let F=r;if(l!==d){const v=e[g];F=p(v)||Array.isArray(v)?v:isNaN(+s[l+1])?{}:[]}e[g]=F,e=e[g]}return e}const ke=(e,i,r)=>{for(const l of r||Object.keys(e)){const s=c(e,l);if(s){const{_f:a,...d}=s;if(a&&i(a.name)){if(a.ref.focus){a.ref.focus();break}else if(a.refs&&a.refs[0].focus){a.refs[0].focus();break}}else p(d)&&ke(d,i)}}};var qe=e=>({isOnSubmit:!e||e===I.onSubmit,isOnBlur:e===I.onBlur,isOnChange:e===I.onChange,isOnAll:e===I.all,isOnTouch:e===I.onTouched}),We=(e,i,r)=>!r&&(i.watchAll||i.watch.has(e)||[...i.watch].some(l=>e.startsWith(l)&&/^\.\w+/.test(e.slice(l.length)))),St=(e,i,r)=>{const l=ae(c(e,r));return x(l,"root",i[r]),x(e,r,l),e},Z=e=>typeof e=="boolean",Le=e=>e.type==="file",ee=e=>typeof e=="function",de=e=>{if(!pe)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},ce=e=>H(e)||S.isValidElement(e),Te=e=>e.type==="radio",ye=e=>e instanceof RegExp;const He={value:!1,isValid:!1},je={value:!0,isValid:!0};var st=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!C(e[0].attributes.value)?C(e[0].value)||e[0].value===""?je:{value:e[0].value,isValid:!0}:je:He}return He};const $e={isValid:!1,value:null};var it=e=>Array.isArray(e)?e.reduce((i,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:i,$e):$e;function Ke(e,i,r="validate"){if(ce(e)||Array.isArray(e)&&e.every(ce)||Z(e)&&!e)return{type:r,message:ce(e)?e:"",ref:i}}var X=e=>p(e)&&!ye(e)?e:{value:e,message:""},Ge=async(e,i,r,l,s)=>{const{ref:a,refs:d,required:g,maxLength:F,minLength:v,min:w,max:L,pattern:m,validate:_,name:M,valueAsNumber:ve,mount:le,disabled:_e}=e._f,V=c(i,M);if(!le||_e)return{};const N=d?d[0]:a,j=A=>{l&&N.reportValidity&&(N.setCustomValidity(Z(A)?"":A||""),N.reportValidity())},O={},te=Te(a),re=ue(a),Ve=te||re,q=(ve||Le(a))&&C(a.value)&&C(V)||de(a)&&a.value===""||V===""||Array.isArray(V)&&!V.length,z=Dt.bind(null,M,r,O),$=(A,b,k,U=K.maxLength,B=K.minLength)=>{const W=A?b:k;O[M]={type:A?U:B,message:W,ref:a,...z(A?U:B,W)}};if(s?!Array.isArray(V)||!V.length:g&&(!Ve&&(q||R(V))||Z(V)&&!V||re&&!st(d).isValid||te&&!it(d).isValid)){const{value:A,message:b}=ce(g)?{value:!!g,message:g}:X(g);if(A&&(O[M]={type:K.required,message:b,ref:N,...z(K.required,b)},!r))return j(b),O}if(!q&&(!R(w)||!R(L))){let A,b;const k=X(L),U=X(w);if(!R(V)&&!isNaN(V)){const B=a.valueAsNumber||V&&+V;R(k.value)||(A=B>k.value),R(U.value)||(b=B<U.value)}else{const B=a.valueAsDate||new Date(V),W=ie=>new Date(new Date().toDateString()+" "+ie),J=a.type=="time",se=a.type=="week";H(k.value)&&V&&(A=J?W(V)>W(k.value):se?V>k.value:B>new Date(k.value)),H(U.value)&&V&&(b=J?W(V)<W(U.value):se?V<U.value:B<new Date(U.value))}if((A||b)&&($(!!A,k.message,U.message,K.max,K.min),!r))return j(O[M].message),O}if((F||v)&&!q&&(H(V)||s&&Array.isArray(V))){const A=X(F),b=X(v),k=!R(A.value)&&V.length>A.value,U=!R(b.value)&&V.length<b.value;if((k||U)&&($(k,A.message,b.message),!r))return j(O[M].message),O}if(m&&!q&&H(V)){const{value:A,message:b}=X(m);if(ye(A)&&!V.match(A)&&(O[M]={type:K.pattern,message:b,ref:a,...z(K.pattern,b)},!r))return j(b),O}if(_){if(ee(_)){const A=await _(V,i),b=Ke(A,N);if(b&&(O[M]={...b,...z(K.validate,b.message)},!r))return j(b.message),O}else if(p(_)){let A={};for(const b in _){if(!P(A)&&!r)break;const k=Ke(await _[b](V,i),N,b);k&&(A={...k,...z(b,k.message)},j(k.message),r&&(O[M]=A))}if(!P(A)&&(O[M]={ref:N,...A},!r))return O}}return j(!0),O};function kt(e,i){const r=i.slice(0,-1).length;let l=0;for(;l<r;)e=C(e)?l++:e[i[l++]];return e}function Et(e){for(const i in e)if(!C(e[i]))return!1;return!0}function T(e,i){const r=Array.isArray(i)?i:Oe(i)?[i]:rt(i),l=r.length===1?e:kt(e,r),s=r.length-1,a=r[s];return l&&delete l[a],s!==0&&(p(l)&&P(l)||Array.isArray(l)&&Et(l))&&T(e,r.slice(0,-1)),e}function we(){let e=[];return{get observers(){return e},next:s=>{for(const a of e)a.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(a=>a!==s)}}),unsubscribe:()=>{e=[]}}}var he=e=>R(e)||!Je(e);function Q(e,i){if(he(e)||he(i))return e===i;if(Y(e)&&Y(i))return e.getTime()===i.getTime();const r=Object.keys(e),l=Object.keys(i);if(r.length!==l.length)return!1;for(const s of r){const a=e[s];if(!l.includes(s))return!1;if(s!=="ref"){const d=i[s];if(Y(a)&&Y(d)||p(a)&&p(d)||Array.isArray(a)&&Array.isArray(d)?!Q(a,d):a!==d)return!1}}return!0}var nt=e=>e.type==="select-multiple",Ct=e=>Te(e)||ue(e),me=e=>de(e)&&e.isConnected,ut=e=>{for(const i in e)if(ee(e[i]))return!0;return!1};function ge(e,i={}){const r=Array.isArray(e);if(p(e)||r)for(const l in e)Array.isArray(e[l])||p(e[l])&&!ut(e[l])?(i[l]=Array.isArray(e[l])?[]:{},ge(e[l],i[l])):R(e[l])||(i[l]=!0);return i}function at(e,i,r){const l=Array.isArray(e);if(p(e)||l)for(const s in e)Array.isArray(e[s])||p(e[s])&&!ut(e[s])?C(i)||he(r[s])?r[s]=Array.isArray(e[s])?ge(e[s],[]):{...ge(e[s])}:at(e[s],R(i)?{}:i[s],r[s]):Q(e[s],i[s])?delete r[s]:r[s]=!0;return r}var De=(e,i)=>at(e,i,ge(i)),lt=(e,{valueAsNumber:i,valueAsDate:r,setValueAs:l})=>C(e)?e:i?e===""?NaN:e&&+e:r&&H(e)?new Date(e):l?l(e):e;function Se(e){const i=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):i.disabled))return Le(i)?i.files:Te(i)?it(e.refs).value:nt(i)?[...i.selectedOptions].map(({value:r})=>r):ue(i)?st(e.refs).value:lt(C(i.value)?e.ref.value:i.value,e)}var pt=(e,i,r,l)=>{const s={};for(const a of e){const d=c(i,a);d&&x(s,a,d._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:l}},ne=e=>C(e)?e:ye(e)?e.source:p(e)?ye(e.value)?e.value.source:e.value:e,Ot=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function ze(e,i,r){const l=c(e,r);if(l||Oe(r))return{error:l,name:r};const s=r.split(".");for(;s.length;){const a=s.join("."),d=c(i,a),g=c(e,a);if(d&&!Array.isArray(d)&&r!==a)return{name:r};if(g&&g.type)return{name:a,error:g};s.pop()}return{name:r}}var Lt=(e,i,r,l,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(i||e):(r?l.isOnBlur:s.isOnBlur)?!e:(r?l.isOnChange:s.isOnChange)?e:!0,Tt=(e,i)=>!ae(c(e,i)).length&&T(e,i);const Rt={mode:I.onSubmit,reValidateMode:I.onChange,shouldFocusError:!0};function Ut(e={},i){let r={...Rt,...e};const l=e.resetOptions&&e.resetOptions.keepDirtyValues;let s={submitCount:0,isDirty:!1,isLoading:!0,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},a={},d=p(r.defaultValues)||p(r.values)?G(r.defaultValues||r.values)||{}:{},g=r.shouldUnregister?{}:G(d),F={action:!1,mount:!1,watch:!1},v={mount:new Set,unMount:new Set,array:new Set,watch:new Set},w,L=0;const m={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},_={watch:we(),array:we(),state:we()},M=qe(r.mode),ve=qe(r.reValidateMode),le=r.criteriaMode===I.all,_e=t=>n=>{clearTimeout(L),L=window.setTimeout(t,n)},V=async t=>{if(m.isValid||t){const n=r.resolver?P((await q()).errors):await $(a,!0);n!==s.isValid&&_.state.next({isValid:n})}},N=t=>m.isValidating&&_.state.next({isValidating:t}),j=(t,n=[],u,f,y=!0,o=!0)=>{if(f&&u){if(F.action=!0,o&&Array.isArray(c(a,t))){const h=u(c(a,t),f.argA,f.argB);y&&x(a,t,h)}if(o&&Array.isArray(c(s.errors,t))){const h=u(c(s.errors,t),f.argA,f.argB);y&&x(s.errors,t,h),Tt(s.errors,t)}if(m.touchedFields&&o&&Array.isArray(c(s.touchedFields,t))){const h=u(c(s.touchedFields,t),f.argA,f.argB);y&&x(s.touchedFields,t,h)}m.dirtyFields&&(s.dirtyFields=De(d,g)),_.state.next({name:t,isDirty:b(t,n),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else x(g,t,n)},O=(t,n)=>{x(s.errors,t,n),_.state.next({errors:s.errors})},te=(t,n,u,f)=>{const y=c(a,t);if(y){const o=c(g,t,C(u)?c(d,t):u);C(o)||f&&f.defaultChecked||n?x(g,t,n?o:Se(y._f)):B(t,o),F.mount&&V()}},re=(t,n,u,f,y)=>{let o=!1,h=!1;const E={name:t};if(!u||f){m.isDirty&&(h=s.isDirty,s.isDirty=E.isDirty=b(),o=h!==E.isDirty);const D=Q(c(d,t),n);h=c(s.dirtyFields,t),D?T(s.dirtyFields,t):x(s.dirtyFields,t,!0),E.dirtyFields=s.dirtyFields,o=o||m.dirtyFields&&h!==!D}if(u){const D=c(s.touchedFields,t);D||(x(s.touchedFields,t,u),E.touchedFields=s.touchedFields,o=o||m.touchedFields&&D!==u)}return o&&y&&_.state.next(E),o?E:{}},Ve=(t,n,u,f)=>{const y=c(s.errors,t),o=m.isValid&&Z(n)&&s.isValid!==n;if(e.delayError&&u?(w=_e(()=>O(t,u)),w(e.delayError)):(clearTimeout(L),w=null,u?x(s.errors,t,u):T(s.errors,t)),(u?!Q(y,u):y)||!P(f)||o){const h={...f,...o&&Z(n)?{isValid:n}:{},errors:s.errors,name:t};s={...s,...h},_.state.next(h)}N(!1)},q=async t=>await r.resolver(g,r.context,pt(t||v.mount,a,r.criteriaMode,r.shouldUseNativeValidation)),z=async t=>{const{errors:n}=await q();if(t)for(const u of t){const f=c(n,u);f?x(s.errors,u,f):T(s.errors,u)}else s.errors=n;return n},$=async(t,n,u={valid:!0})=>{for(const f in t){const y=t[f];if(y){const{_f:o,...h}=y;if(o){const E=v.array.has(o.name),D=await Ge(y,g,le,r.shouldUseNativeValidation,E);if(D[o.name]&&(u.valid=!1,n))break;!n&&(c(D,o.name)?E?St(s.errors,D,o.name):x(s.errors,o.name,D[o.name]):T(s.errors,o.name))}h&&await $(h,n,u)}}return u.valid},A=()=>{for(const t of v.unMount){const n=c(a,t);n&&(n._f.refs?n._f.refs.every(u=>!me(u)):!me(n._f.ref))&&be(t)}v.unMount=new Set},b=(t,n)=>(t&&n&&x(g,t,n),!Q(Re(),d)),k=(t,n,u)=>tt(t,v,{...F.mount?g:C(n)?d:H(t)?{[t]:n}:n},u,n),U=t=>ae(c(F.mount?g:d,t,e.shouldUnregister?c(d,t,[]):[])),B=(t,n,u={})=>{const f=c(a,t);let y=n;if(f){const o=f._f;o&&(!o.disabled&&x(g,t,lt(n,o)),y=de(o.ref)&&R(n)?"":n,nt(o.ref)?[...o.ref.options].forEach(h=>h.selected=y.includes(h.value)):o.refs?ue(o.ref)?o.refs.length>1?o.refs.forEach(h=>(!h.defaultChecked||!h.disabled)&&(h.checked=Array.isArray(y)?!!y.find(E=>E===h.value):y===h.value)):o.refs[0]&&(o.refs[0].checked=!!y):o.refs.forEach(h=>h.checked=h.value===y):Le(o.ref)?o.ref.value="":(o.ref.value=y,o.ref.type||_.watch.next({name:t})))}(u.shouldDirty||u.shouldTouch)&&re(t,y,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&ie(t)},W=(t,n,u)=>{for(const f in n){const y=n[f],o=`${t}.${f}`,h=c(a,o);(v.array.has(t)||!he(y)||h&&!h._f)&&!Y(y)?W(o,y,u):B(o,y,u)}},J=(t,n,u={})=>{const f=c(a,t),y=v.array.has(t),o=G(n);x(g,t,o),y?(_.array.next({name:t,values:g}),(m.isDirty||m.dirtyFields)&&u.shouldDirty&&_.state.next({name:t,dirtyFields:De(d,g),isDirty:b(t,o)})):f&&!f._f&&!R(o)?W(t,o,u):B(t,o,u),We(t,v)&&_.state.next({}),_.watch.next({name:t}),!F.mount&&i()},se=async t=>{const n=t.target;let u=n.name;const f=c(a,u),y=()=>n.type?Se(f._f):Qe(t);if(f){let o,h;const E=y(),D=t.type===fe.BLUR||t.type===fe.FOCUS_OUT,vt=!Ot(f._f)&&!r.resolver&&!c(s.errors,u)&&!f._f.deps||Lt(D,c(s.touchedFields,u),s.isSubmitted,ve,M),Fe=We(u,v,D);x(g,u,E),D?(f._f.onBlur&&f._f.onBlur(t),w&&w(0)):f._f.onChange&&f._f.onChange(t);const xe=re(u,E,D,!1),_t=!P(xe)||Fe;if(!D&&_.watch.next({name:u,type:t.type}),vt)return m.isValid&&V(),_t&&_.state.next({name:u,...Fe?{}:xe});if(!D&&Fe&&_.state.next({}),N(!0),r.resolver){const{errors:Ne}=await q([u]),Vt=ze(s.errors,a,u),Ie=ze(Ne,a,Vt.name||u);o=Ie.error,u=Ie.name,h=P(Ne)}else o=(await Ge(f,g,le,r.shouldUseNativeValidation))[u],o?h=!1:m.isValid&&(h=await $(a,!0));f._f.deps&&ie(f._f.deps),Ve(u,h,o,xe)}},ie=async(t,n={})=>{let u,f;const y=oe(t);if(N(!0),r.resolver){const o=await z(C(t)?t:y);u=P(o),f=t?!y.some(h=>c(o,h)):u}else t?(f=(await Promise.all(y.map(async o=>{const h=c(a,o);return await $(h&&h._f?{[o]:h}:h)}))).every(Boolean),!(!f&&!s.isValid)&&V()):f=u=await $(a);return _.state.next({...!H(t)||m.isValid&&u!==s.isValid?{}:{name:t},...r.resolver||!t?{isValid:u}:{},errors:s.errors,isValidating:!1}),n.shouldFocus&&!f&&ke(a,o=>o&&c(s.errors,o),t?y:v.mount),f},Re=t=>{const n={...d,...F.mount?g:{}};return C(t)?n:H(t)?c(n,t):t.map(u=>c(n,u))},Ue=(t,n)=>({invalid:!!c((n||s).errors,t),isDirty:!!c((n||s).dirtyFields,t),isTouched:!!c((n||s).touchedFields,t),error:c((n||s).errors,t)}),ot=t=>{t&&oe(t).forEach(n=>T(s.errors,n)),_.state.next({errors:t?s.errors:{}})},ct=(t,n,u)=>{const f=(c(a,t,{_f:{}})._f||{}).ref;x(s.errors,t,{...n,ref:f}),_.state.next({name:t,errors:s.errors,isValid:!1}),u&&u.shouldFocus&&f&&f.focus&&f.focus()},ft=(t,n)=>ee(t)?_.watch.subscribe({next:u=>t(k(void 0,n),u)}):k(t,n,!0),be=(t,n={})=>{for(const u of t?oe(t):v.mount)v.mount.delete(u),v.array.delete(u),c(a,u)&&(n.keepValue||(T(a,u),T(g,u)),!n.keepError&&T(s.errors,u),!n.keepDirty&&T(s.dirtyFields,u),!n.keepTouched&&T(s.touchedFields,u),!r.shouldUnregister&&!n.keepDefaultValue&&T(d,u));_.watch.next({}),_.state.next({...s,...n.keepDirty?{isDirty:b()}:{}}),!n.keepIsValid&&V()},Ae=(t,n={})=>{let u=c(a,t);const f=Z(n.disabled);return x(a,t,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:t}},name:t,mount:!0,...n}}),v.mount.add(t),u?f&&x(g,t,n.disabled?void 0:c(g,t,Se(u._f))):te(t,!0,n.value),{...f?{disabled:n.disabled}:{},...r.shouldUseNativeValidation?{required:!!n.required,min:ne(n.min),max:ne(n.max),minLength:ne(n.minLength),maxLength:ne(n.maxLength),pattern:ne(n.pattern)}:{},name:t,onChange:se,onBlur:se,ref:y=>{if(y){Ae(t,n),u=c(a,t);const o=C(y.value)&&y.querySelectorAll&&y.querySelectorAll("input,select,textarea")[0]||y,h=Ct(o),E=u._f.refs||[];if(h?E.find(D=>D===o):o===u._f.ref)return;x(a,t,{_f:{...u._f,...h?{refs:[...E.filter(me),o,...Array.isArray(c(d,t))?[{}]:[]],ref:{type:o.type,name:t}}:{ref:o}}}),te(t,!1,void 0,o)}else u=c(a,t,{}),u._f&&(u._f.mount=!1),(r.shouldUnregister||n.shouldUnregister)&&!(Xe(v.array,t)&&F.action)&&v.unMount.add(t)}}},Me=()=>r.shouldFocusError&&ke(a,t=>t&&c(s.errors,t),v.mount),dt=(t,n)=>async u=>{u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let f=G(g);if(_.state.next({isSubmitting:!0}),r.resolver){const{errors:y,values:o}=await q();s.errors=y,f=o}else await $(a);T(s.errors,"root"),P(s.errors)?(_.state.next({errors:{}}),await t(f,u)):(n&&await n({...s.errors},u),Me()),_.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:P(s.errors),submitCount:s.submitCount+1,errors:s.errors})},yt=(t,n={})=>{c(a,t)&&(C(n.defaultValue)?J(t,c(d,t)):(J(t,n.defaultValue),x(d,t,n.defaultValue)),n.keepTouched||T(s.touchedFields,t),n.keepDirty||(T(s.dirtyFields,t),s.isDirty=n.defaultValue?b(t,c(d,t)):b()),n.keepError||(T(s.errors,t),m.isValid&&V()),_.state.next({...s}))},Be=(t,n={})=>{const u=t||d,f=G(u),y=t&&!P(t)?f:d;if(n.keepDefaultValues||(d=u),!n.keepValues){if(n.keepDirtyValues||l)for(const o of v.mount)c(s.dirtyFields,o)?x(y,o,c(g,o)):J(o,c(y,o));else{if(pe&&C(t))for(const o of v.mount){const h=c(a,o);if(h&&h._f){const E=Array.isArray(h._f.refs)?h._f.refs[0]:h._f.ref;if(de(E)){const D=E.closest("form");if(D){D.reset();break}}}}a={}}g=e.shouldUnregister?n.keepDefaultValues?G(d):{}:f,_.array.next({values:y}),_.watch.next({values:y})}v={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!F.mount&&i(),F.mount=!m.isValid||!!n.keepIsValid,F.watch=!!e.shouldUnregister,_.state.next({submitCount:n.keepSubmitCount?s.submitCount:0,isDirty:n.keepDirty||n.keepDirtyValues?s.isDirty:!!(n.keepDefaultValues&&!Q(t,d)),isSubmitted:n.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:n.keepDirty||n.keepDirtyValues?s.dirtyFields:n.keepDefaultValues&&t?De(d,t):{},touchedFields:n.keepTouched?s.touchedFields:{},errors:n.keepErrors?s.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},Pe=(t,n)=>Be(ee(t)?t(g):t,n),ht=(t,n={})=>{const u=c(a,t),f=u&&u._f;if(f){const y=f.refs?f.refs[0]:f.ref;y.focus&&(y.focus(),n.shouldSelect&&y.select())}},gt=t=>{s={...s,...t}};return ee(r.defaultValues)&&r.defaultValues().then(t=>{Pe(t,r.resetOptions),_.state.next({isLoading:!1})}),{control:{register:Ae,unregister:be,getFieldState:Ue,_executeSchema:q,_focusError:Me,_getWatch:k,_getDirty:b,_updateValid:V,_removeUnmounted:A,_updateFieldArray:j,_getFieldArray:U,_reset:Be,_updateFormState:gt,_subjects:_,_proxyFormState:m,get _fields(){return a},get _formValues(){return g},get _stateFlags(){return F},set _stateFlags(t){F=t},get _defaultValues(){return d},get _names(){return v},set _names(t){v=t},get _formState(){return s},set _formState(t){s=t},get _options(){return r},set _options(t){r={...r,...t}}},trigger:ie,register:Ae,handleSubmit:dt,watch:ft,setValue:J,getValues:Re,reset:Pe,resetField:yt,clearErrors:ot,unregister:be,setError:ct,setFocus:ht,getFieldState:Ue}}function Pt(e={}){const i=S.useRef(),[r,l]=S.useState({isDirty:!1,isValidating:!1,isLoading:!0,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:ee(e.defaultValues)?void 0:e.defaultValues});i.current||(i.current={...Ut(e,()=>l(a=>({...a}))),formState:r});const s=i.current.control;return s._options=e,Ce({subject:s._subjects.state,next:a=>{Ze(a,s._proxyFormState,s._updateFormState,!0)&&l({...s._formState})}}),S.useEffect(()=>{s._stateFlags.mount||(s._updateValid(),s._stateFlags.mount=!0),s._stateFlags.watch&&(s._stateFlags.watch=!1,s._subjects.state.next({})),s._removeUnmounted()}),S.useEffect(()=>{e.values&&!Q(e.values,s._defaultValues)&&s._reset(e.values,s._options.resetOptions)},[e.values,s]),S.useEffect(()=>{r.submitCount&&s._focusError()},[s,r.submitCount]),i.current.formState=Ye(r,s),i.current}export{Bt as C,Pt as u};
